#!/bin/bash
echo "ğŸš€ ä¸€é”®ç½‘ç»œæµ‹é€Ÿï¼ˆç¨³å®šç‰ˆï¼‰"

# å»¶è¿Ÿæµ‹è¯•
echo "1. ç½‘ç»œå»¶è¿Ÿæµ‹è¯•ï¼ˆ10æ¬¡ï¼‰ï¼š"
ping -c 10 114.114.114.114 | tail -1 | awk -F'/' '{print "   å¹³å‡å»¶è¿Ÿ: "$4" ms"}'

# ä¸‹è½½é€Ÿåº¦æµ‹è¯•ï¼ˆç¡®ä¿æµ‹è¯•10ç§’ï¼‰
echo "2. ä¸‹è½½é€Ÿåº¦æµ‹è¯•ï¼ˆ10ç§’ï¼‰ï¼š"
for i in {1..3}; do
    echo "   ç¬¬$iæ¬¡æµ‹è¯•..."
    start=$(date +%s)
    speed=$(curl -s -w "%{speed_download}" -o /dev/null --max-time 10 http://cachefly.cachefly.net/100mb.test)
    end=$(date +%s)
    duration=$((end - start))
    
    if [ $duration -ge 5 ]; then
        speed_mbps=$(echo "scale=2; $speed / 1024 / 1024" | bc)
        echo "   ä¸‹è½½é€Ÿåº¦: $speed_mbps MB/s"
        break
    fi
done

echo "âœ… æµ‹é€Ÿå®Œæˆ"
