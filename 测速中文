#!/bin/bash
echo "ğŸš€ ä¸€é”®ç½‘ç»œæµ‹é€Ÿ"

# æµ‹è¯•ç½‘ç»œè¿é€šæ€§
echo "ğŸ“¡ æ£€æŸ¥ç½‘ç»œè¿é€šæ€§..."
if ping -c 2 8.8.8.8 &> /dev/null; then
    echo "âœ… ç½‘ç»œè¿æ¥æ­£å¸¸"
else
    echo "âŒ ç½‘ç»œè¿æ¥å¤±è´¥"
    exit 1
fi

# å»¶è¿Ÿæµ‹è¯•
echo ""
echo "ğŸ”„ æµ‹è¯•ç½‘ç»œå»¶è¿Ÿ..."
ping -c 8 8.8.8.8 | tail -1 | awk -F'/' '{print "å¹³å‡å»¶è¿Ÿ: "$4" ms"}'

# ä¸‹è½½é€Ÿåº¦æµ‹è¯• - ä½¿ç”¨æ›´å¯é çš„æ–¹æ³•
echo ""
echo "â¬‡ï¸ æµ‹è¯•ä¸‹è½½é€Ÿåº¦..."
echo "å¼€å§‹ä¸‹è½½æµ‹è¯•æ–‡ä»¶..."

# ä½¿ç”¨ time å’Œ wget ç»„åˆ
/usr/bin/time -f "ä¸‹è½½é€Ÿåº¦: %eç§’ å®Œæˆ100MBä¸‹è½½" wget -q -O /dev/null --timeout=30 http://cachefly.cachefly.net/100mb.test

# è®¡ç®—å®é™…é€Ÿåº¦
if [ $? -eq 0 ]; then
    echo "âœ… ä¸‹è½½æµ‹è¯•å®Œæˆ"
else
    echo "âŒ ä¸‹è½½æµ‹è¯•å¤±è´¥ï¼Œå°è¯•å¤‡ç”¨æœåŠ¡å™¨..."
    wget -O /dev/null --progress=dot:giga --timeout=20 http://speedtest.ftp.otenet.gr/files/test100Mb.db
fi

echo ""
echo "ğŸ¯ æµ‹é€Ÿå®Œæˆ"
