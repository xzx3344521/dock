#!/bin/bash
echo "🚀 网络测速工具"

# 延迟测试
echo "1. 延迟测试:"
ping -c 5 114.114.114.114 | grep "avg" | awk -F'/' '{print "   平均延迟: "$4" ms"}'

# 下载速度测试 - 使用系统内置方法
echo "2. 下载速度测试:"
echo "   生成测试数据..."
time dd if=/dev/zero of=/tmp/testfile bs=1M count=100 2>&1 | grep "MB/s" | awk '{print "   磁盘写入速度: "$8" "$9}'

# 网络下载测试（可选）
echo "3. 网络下载测试:"
if command -v curl &> /dev/null; then
    echo "   正在测试网络下载..."
    curl -s -w "   下载时间: %{time_total}秒\n" -o /dev/null https://www.baidu.com
else
    echo "   跳过网络下载测试 (curl不可用)"
fi

rm -f /tmp/testfile
echo "✅ 测试完成"
