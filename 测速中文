#!/bin/bash
echo "ğŸš€ ä¸€é”®ç½‘ç»œæµ‹é€Ÿï¼ˆç²¾ç¡®ç‰ˆï¼‰"

# å»¶è¿Ÿæµ‹è¯• - 20æ¬¡pingå–å¹³å‡å€¼
echo "ğŸ”„ æµ‹è¯•ç½‘ç»œå»¶è¿Ÿ..."
ping -c 20 8.8.8.8 | tail -1 | awk -F'/' '{print "ç½‘ç»œå»¶è¿Ÿ: " $4 " ms"}'

# ä¸‹è½½é€Ÿåº¦æµ‹è¯• - ä½¿ç”¨ dd å‘½ä»¤æŒç»­æµ‹è¯•10ç§’
echo "â¬‡ï¸ æµ‹è¯•ä¸‹è½½é€Ÿåº¦..."
# åˆ›å»ºæµ‹è¯•URLï¼ˆä½¿ç”¨ä¸åŒCDNç¡®ä¿ç¨³å®šæ€§ï¼‰
test_urls=(
    "http://cachefly.cachefly.net/100mb.test"
    "http://speedtest.ftp.otenet.gr/files/test100Mb.db"
    "http://proof.ovh.net/files/100Mb.dat"
)

for url in "${test_urls[@]}"; do
    echo "æ­£åœ¨ä» $(echo $url | cut -d'/' -f3) æµ‹è¯•..."
    speed=$(curl -s -w "%{speed_download}" -o /dev/null --max-time 10 "$url")
    speed_mbps=$(echo "scale=2; $speed / 1024 / 1024" | bc)
    echo "ä¸‹è½½é€Ÿåº¦: $speed_mbps MB/s"
    break
done

echo "âœ… æµ‹é€Ÿå®Œæˆ"
